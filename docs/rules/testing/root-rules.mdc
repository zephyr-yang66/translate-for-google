---
description: AI测试框架项目规则 - 包含项目规范、代码质量、简洁代码、Python最佳实践、Playwright测试和智能体命名规则
globs: ["**/*.md", "**/*.csv", "**/*.py", "**/*.java", "**/*.js", "**/*.jsx", "**/*.ts", "**/*.tsx", "**/*.go", "**/*.rs", "**/*.cpp", "**/*.c", "**/*.h", "**/*.hpp", "**/*.sh", "**/*.bat", "**/*.jmx", "**/*.e2e.test.ts", "**/*.e2e.spec.ts", "**/e2e/**/*.test.ts"]
alwaysApply: true
priority: 1000
---

# AI测试框架项目规范


## 命名规范
- 用例: `[模块]_测试用例_[类型]_YYYYMMDD_HHMMSS.csv`
- 报告: `[模块]_[报告类型]_YYYYMMDD_HHMMSS.md`
- 截图: `[模块]_[操作].png`

## CSV用例格式
必含: 用例编号、名称、类型、前置条件、测试步骤、预期结果、优先级

## Markdown报告
使用模板,含执行摘要、测试结果、问题清单



## 知识学习阶段（阶段0）
**所有Agent必须先执行阶段0**:
- 遵循项目统一规范（详见 `docs/rules/testing/root-rules.mdc` 和 `docs/rules/testing/project-rules.mdc`）
- 读取`docs/rules/`所有文档
- 学习业务规则/技术规范/测试标准
- 应用知识到当前工作流程
- 请耐心的分析每一个需求，不要因为时间问题而对任务进行批处理或者合并

## Mock服务
- 地址: http://172.16.30.248:9527/
- 用途: 创建Mock接口,模拟API响应

## 问题记录
**表格式**: 序号|模块|标题|描述|步骤|预期|实际|严重程度|时间|模式|测试人|截图|状态|验证人|验证时间|备注

**规则**: 发现问题立即记录+截图,状态默认"待验证",详细记录步骤

**状态**: 待验证/已修复/已验证/已关闭/无需修复

## 异常处理
**流程**: 截图(`docs/rules/testing/outputs/`) → 记录(报告) → 必要时请求用户介入

**截图保障**:
- 任何异常必须截图,优先Playwright
- 工具: `mcp_playwright_browser_take_screenshot`
- 命名: `{模块}_{异常}_{时间戳}.png`

**用户介入**: 环境连接失败/元素无法定位/数据准备失败/系统异常/截图失败

## 搜索功能测试
**结果标注**: 为空(不确定,需人工确认) | 有结果(通过) | 异常(失败)

**覆盖**: 编号搜索/下拉筛选/组合条件/重置/结果验证

## 弹窗测试
**循环规则**: 检查元素 → 功能测试 → 交互测试 → 完成后返回 → 继续其他测试

**覆盖**: 输入验证/按钮响应/下拉选择/表单提交取消/数据生成/用户添加删除

## 浏览器使用
**流程**: 检查状态 → 优先用已打开/无则新开登录 → 强制全屏 → 验证登录

**详细流程**:
1. **检查浏览器状态**: 优先使用已打开的浏览器
2. **浏览器处理**:
   - 有浏览器：直接使用当前浏览器
   - 无浏览器：新开浏览器并登录系统
3. **强制全屏**: 打开浏览器后立即全屏显示
4. **验证登录**: 确保已登录系统

## 时间获取规则
**强制要求**: 任何文档中的时间都必须获取当时实际的时间，禁止使用硬编码的日期。

**获取方式**:
- **Python代码中**: 使用 `datetime.now()` 等函数获取当前实际日期时间
- **命令行中**: 使用 `date` 命令获取当前时间并格式化
- **禁止硬编码**: 禁止在代码中硬编码日期（如 "2024年"、"2025年" 等固定日期）

**格式规范**:
- 文件命名: `YYYYMMDD_HHMMSS`（如：20241101_143025）
- 文档内容: `YYYY年MM月DD日` 或 `YYYY年MM月DD日 HH:MM:SS`

**应用场景**: 文档生成时间、测试报告时间戳、文件命名中的时间戳、日志记录时间、问题记录表中的时间字段

**示例命令**:
- 获取时间戳（文件命名格式）: `date +"%Y%m%d_%H%M%S"`
- 获取日期时间（文档格式）: `date +"%Y年%m月%d日 %H:%M:%S"`
- 获取日期（文档格式）: `date +"%Y年%m月%d日"`

## 测试文件配置
### 文件上传测试
- **测试文件目录**: `docs/rules/testing/material/`
- **文件类型**: TXT、PDF、DOC、DOCX、PNG、JPG等
- **文件大小**: 小文件、中等文件、大文件、超大文件、最大文件
- **文件命名**: test_small.*, test_medium.*, test_large.*, test_xlarge.*, test_maximum.*
- **对应格式**: 每种大小支持 .txt, .pdf, .doc, .docx, .png, .jpg 等格式

## 输出规范
- **所有输出**: 统一保存到 `docs/rules/testing/outputs/` 目录（不纳入版本控制）
- **文件命名**: 遵循命名规范（见上方"命名规范"章节）
- **报告格式**: 使用 `docs/templates/` 目录下的对应模板
- **截图要求**: 测试截图必须包含在报告中
- **问题记录**: 发现问题立即记录到问题记录表（参考"问题记录"章节）

## 命令执行规范
**通用工作流程**:
1. **获取时间戳**: 使用系统命令或Python代码获取当前时间戳（用于文件命名等，参考"时间获取规则"章节）
2. **参数解析**: 解析用户输入的参数，确定要执行的任务类型
3. **知识学习**: 遵循项目统一规范（详见 `docs/rules/testing/root-rules.mdc` 和 `docs/rules/testing/project-rules.mdc`），读取`docs/rules/`所有文档，学习业务规则/技术规范/测试标准（参考"知识学习阶段"章节）
4. **执行对应任务**: 根据参数调用相应的agent文件执行任务
5. **输出结果**: 所有结果输出到 `docs/rules/testing/outputs/` 目录（参考"输出规范"章节）

**命令参数**:
- 支持参数不区分大小写
- 未提供参数时显示帮助信息
- 所有命令必须先完成知识学习阶段（阶段0）

## 注意事项
1. 所有输出的文档中，除了README.MD外，禁止出现 emoji & 表情包
2. 使用统一模板生成报告
3. 所有问题必须按统一格式记录到问题记录表

## 文档质量要求
**不要理解反馈**: 避免在注释或文档中提供关于理解的反馈

**不要空白建议**: 不要建议空白更改

**不要总结**: 不要总结所做的更改


📝 **版本**：v1.0
📅 **发布日期**：2025年11月1日
© 本规则适用于所有基于 Cursor 的 AI 智能体测试与协作场景。由王瑞雪维护，欢迎反馈。
推荐所有团队成员共同遵守，确保智能体系统的可维护性与可扩展性。
