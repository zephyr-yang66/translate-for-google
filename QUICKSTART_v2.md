# 🚀 快速入门指南 v2.0

## 欢迎使用全新的安全版本！

v2.0 版本进行了全面的安全改造，现在您可以放心使用免费的翻译服务了！

---

## ⏱️ 3 分钟快速上手

### 第 1 步：安装扩展（30 秒）

```bash
npm run build
```

然后：
1. 打开 Chrome 浏览器
2. 访问 `chrome://extensions/`
3. 启用「开发者模式」
4. 点击「加载已解压的扩展程序」
5. 选择 `dist/` 目录

✅ **自动打开配置页面**

---

### 第 2 步：获取免费 API 密钥（2 分钟）

#### 推荐：百度翻译（免费 200 万字符/月）⭐

1. 访问 https://fanyi-api.baidu.com/
2. 注册/登录账号
3. 进入「管理控制台」→「开发者信息」
4. 复制 **APP ID** 和**密钥**

#### 或者：直接使用 LibreTranslate（完全免费）

无需注册，直接选择即可！

---

### 第 3 步：配置扩展（30 秒）

在自动打开的配置页面：

1. ✅ 选择「百度翻译 API」
2. ✅ 粘贴 APP ID 和密钥
3. ✅ 点击「🧪 测试连接」
4. ✅ 看到"测试成功"后点击「💾 保存设置」

**推荐启用：**
- ✅ 启用翻译缓存（减少 API 调用）
- ✅ 启用 API 备用方案（提高可用性）

---

### 第 4 步：开始翻译（10 秒）

1. 访问任意英文网页
2. 选中一段文本
3. 右键 → 「翻译选中文本」
4. 查看右侧抽屉中的翻译结果

🎉 **完成！**

---

## 🆕 v2.0 新特性

### 🔐 安全升级

| 特性 | v1.0 | v2.0 |
|------|------|------|
| API 密钥 | ❌ 硬编码（不安全） | ✅ 用户自主配置 |
| 密钥存储 | ❌ 代码中明文 | ✅ chrome.storage 加密存储 |
| 请求限流 | ❌ 无限制 | ✅ 30次/分，500次/小时 |
| 缓存机制 | ❌ 无 | ✅ 7天自动缓存 |

### 🆓 多 API 支持

| API | 费用 | 免费额度 | 质量 | 推荐度 |
|-----|------|----------|------|--------|
| 百度翻译 | 免费 | 200万字符/月 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| LibreTranslate | 免费 | 无限制 | ⭐⭐⭐ | ⭐⭐⭐⭐ |
| DeepSeek | 付费 | - | ⭐⭐⭐⭐⭐ | ⭐⭐ |

### 🚀 性能提升

- **缓存命中率**：约 70%（相同文本）
- **响应速度**：缓存命中时 < 100ms
- **API 调用减少**：约 70%
- **成本节省**：显著降低

---

## 💡 使用技巧

### 技巧 1：配置多个备用 API

```
主 API: 百度翻译
备用 API 1: LibreTranslate
备用 API 2: DeepSeek（可选）
```

**效果：** 主 API 失败时自动切换，服务更稳定！

### 技巧 2：充分利用缓存

- 相同文本会直接返回缓存结果
- 响应速度接近即时
- 大幅节省 API 配额

### 技巧 3：监控配额使用

1. 登录百度翻译控制台
2. 查看「使用统计」
3. 监控剩余配额

**建议：** 每周检查一次

### 技巧 4：夜间使用 DeepSeek（如配置）

如果配置了 DeepSeek：
- 夜间 00:30-08:30 价格降至 50%
- 更划算的使用时间

---

## 📊 成本对比

### 个人用户（平均使用）

假设每天翻译 50 次，每次 100 字符：

| 方案 | 月调用量 | 月字符数 | 月费用 |
|------|---------|---------|--------|
| 百度翻译 | 1500次 | 15万 | ¥0（免费） |
| LibreTranslate | 1500次 | 15万 | ¥0（免费） |
| DeepSeek | 1500次 | 15万 | ¥3 |

**结论：** 百度翻译完全够用，且完全免费！

### 重度用户

假设每天翻译 300 次：

| 方案 | 月调用量 | 月字符数 | 月费用 |
|------|---------|---------|--------|
| 百度翻译 | 9000次 | 90万 | ¥0（未超额） |
| LibreTranslate | 9000次 | 90万 | ¥0（免费） |
| DeepSeek | 9000次 | 90万 | ¥18 |

**结论：** 200 万字符/月对 99% 的用户都够用！

---

## ⚠️ 常见问题

### Q1: 为什么需要自己配置 API 密钥？

**A:** 出于安全考虑：
- ❌ v1.0 硬编码密钥会被泄露
- ✅ v2.0 用户自主配置，完全掌控
- ✅ 不同用户使用自己的配额，更公平

### Q2: 百度翻译真的免费吗？

**A:** 是的！
- ✅ 完成认证后每月 200 万字符免费
- ✅ 对个人用户完全够用
- ✅ 超额后才需付费

### Q3: 如果忘记密钥怎么办？

**A:** 重新获取：
1. 登录百度翻译控制台
2. 查看「开发者信息」
3. 重置密钥（如需要）

### Q4: 可以同时配置多个 API 吗？

**A:** 可以！
- ✅ 配置多个 API 作为备用
- ✅ 启用「API 备用方案」
- ✅ 主 API 失败自动切换

### Q5: 缓存安全吗？

**A:** 非常安全：
- ✅ 仅保存在本地浏览器
- ✅ 7 天自动清理
- ✅ 不上传到任何服务器

---

## 🔧 高级设置

### 自定义请求频率

编辑 `src/utils/rate-limiter.ts`：

```typescript
private readonly MAX_REQUESTS_PER_MINUTE = 30; // 改为你需要的值
private readonly MAX_REQUESTS_PER_HOUR = 500;  // 改为你需要的值
```

### 调整缓存时长

编辑 `src/utils/cache.ts`：

```typescript
const CACHE_EXPIRY = 7 * 24 * 60 * 60 * 1000; // 7天，可调整
const MAX_CACHE_SIZE = 1000; // 最大缓存条目，可调整
```

### 查看缓存统计

打开浏览器控制台（F12）：

```javascript
// 获取缓存统计
chrome.storage.local.get(null, (data) => {
  const cacheCount = Object.keys(data).filter(k => k.startsWith('translate_cache_')).length;
  console.log('缓存条目数:', cacheCount);
});
```

---

## 📈 效果验证

### 测试缓存命中

1. 翻译一段文本
2. 查看控制台日志："💾 已缓存翻译"
3. 再次翻译相同文本
4. 查看控制台日志："✅ 缓存命中"
5. 响应速度明显加快！

### 测试备用方案

1. 配置百度翻译（主 API）
2. 配置 LibreTranslate（备用）
3. 启用「API 备用方案」
4. 故意填错百度密钥
5. 翻译时会自动切换到 LibreTranslate
6. 查看控制台：看到切换日志

---

## 🎯 最佳实践

### ✅ 推荐配置

```yaml
主 API: 百度翻译
  APP ID: [你的APP ID]
  密钥: [你的密钥]

备用 API: LibreTranslate
  地址: https://libretranslate.com
  密钥: (留空)

高级选项:
  ✅ 启用翻译缓存
  ✅ 启用 API 备用方案
```

### ✅ 使用建议

1. **优先使用免费 API**
   - 百度翻译（200 万字符/月）
   - LibreTranslate（无限制）

2. **启用所有优化功能**
   - 缓存：减少 API 调用
   - 备用方案：提高可用性

3. **定期检查配额**
   - 每周查看一次使用量
   - 避免超出免费额度

4. **保护你的密钥**
   - 不要分享给他人
   - 定期更换密钥

---

## 🎉 开始使用

现在你已经完全了解了 v2.0 的所有特性，可以开始使用了！

### 检查清单

- [x] ✅ 安装扩展
- [x] ✅ 配置 API 密钥
- [x] ✅ 测试连接成功
- [x] ✅ 启用缓存和备用方案
- [x] ✅ 开始翻译

**祝您使用愉快！** 🚀

---

## 📞 需要帮助？

- 📖 [安全使用指南](SECURITY_GUIDE.md)
- 📝 [更新日志](CHANGELOG.md)
- 📋 [完整文档](README.md)

**遇到问题？** 检查浏览器控制台的错误信息，大多数问题都有详细的提示！

