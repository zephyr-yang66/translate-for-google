# 可用命令列表

本文档总结了项目中所有可用的 Cursor 命令。每个命令都可以通过 `/` 前缀在 Cursor 中调用。

## 命令概览

| 命令名称 | 命令文件 | 描述 | 使用场景 |
|---------|---------|------|---------|
| **编写规格** | `编写规格.md` | 从自然语言功能描述创建或更新功能规格 | 开始新功能开发时，需要编写功能规格文档 |
| **澄清需求** | `澄清需求.md` | 识别规格中的歧义领域并提出澄清问题 | 在制定计划前，需要澄清规格中的不确定点 |
| **制定计划** | `制定计划.md` | 使用计划模板生成实施计划设计文件 | 规格完成后，需要制定技术实施计划 |
| **生成任务** | `生成任务.md` | 根据设计文件生成可操作的、依赖排序的任务列表 | 计划完成后，需要生成具体的实施任务 |
| **生成检查表** | `生成检查表.md` | 为当前功能生成自定义需求质量检查表 | 需要验证需求质量时，生成检查表 |
| **分析规格** | `分析规格.md` | 分析规格、计划和任务的一致性、重复和歧义 | 任务生成后，在实施前进行质量分析 |
| **执行实施** | `执行实施.md` | 执行 tasks.md 中定义的所有任务 | 开始实际编码和实施工作 |
| **更新宪章** | `更新宪章.md` | 从交互式或提供的原则输入创建或更新项目宪章 | 需要更新项目核心原则和规范时 |
| **验证** | `验证.md` | 验证需求规范文档中定义的所有用户故事验收场景和功能需求是否在实际系统中得到正确实现 | 需要验证功能是否按照需求正确实现 |

---

## 详细说明

### 1. 编写规格 (`编写规格.md`)

**用途**: 从自然语言功能描述创建或更新功能规格文档。

**主要功能**:
- 根据功能描述生成功能规格 (`spec.md`)
- 提取关键概念（参与者、操作、数据、约束）
- 创建用户场景和功能需求
- 生成成功标准和验收标准
- 进行规格质量验证

**使用场景**:
- 开始新功能开发
- 需要将口头需求转化为正式文档
- 需要规范功能范围和要求

**前置条件**: 无

**后续命令**: `澄清需求` 或 `制定计划`

---

### 2. 澄清需求 (`澄清需求.md`)

**用途**: 通过提出最多 5 个高度针对性的澄清问题来识别规格中规格不足的领域，并将答案编码回规格中。

**主要功能**:
- 识别规格中的歧义和缺失点
- 按优先级排序生成澄清问题
- 交互式提问并记录答案
- 将澄清结果更新到规格文档

**使用场景**:
- 规格文档中存在模糊描述
- 需要明确不确定的技术选择
- 在制定计划前需要消除歧义

**前置条件**: 存在 `spec.md` 文件

**后续命令**: `制定计划`

---

### 3. 制定计划 (`制定计划.md`)

**用途**: 使用计划模板执行实施计划工作流以生成设计文件。

**主要功能**:
- 从功能规格生成技术实施计划
- 填充技术上下文和宪章检查
- 生成研究文档 (`research.md`)
- 生成数据模型 (`data-model.md`)
- 生成 API 合同 (`contracts/`)
- 生成快速开始指南 (`quickstart.md`)

**使用场景**:
- 规格完成后需要制定技术方案
- 需要确定技术栈和架构设计
- 需要设计数据模型和 API

**前置条件**: 存在 `spec.md` 文件

**后续命令**: `生成任务` 或 `生成检查表`

---

### 4. 生成任务 (`生成任务.md`)

**用途**: 根据可用的设计文件为功能生成可操作的、依赖排序的任务列表。

**主要功能**:
- 从规格和计划提取任务
- 按用户故事和阶段组织任务
- 标记任务依赖和并行机会
- 生成可执行的任务检查表 (`tasks.md`)

**使用场景**:
- 计划完成后需要分解为具体任务
- 需要任务管理和跟踪
- 准备开始实施工作

**前置条件**: 存在 `spec.md` 和 `plan.md` 文件

**后续命令**: `分析规格` 或 `执行实施`

---

### 5. 生成检查表 (`生成检查表.md`)

**用途**: 根据用户要求为当前功能生成自定义需求质量检查表。

**主要功能**:
- 生成需求质量验证检查表
- 按质量维度组织检查项（完整性、清晰度、一致性等）
- 验证需求质量而非实施质量
- 创建多个领域特定的检查表（UX、API、安全、性能等）

**使用场景**:
- 需要验证需求文档的质量
- 需要确保需求完整、清晰、可测试
- 在实施前进行需求评审

**前置条件**: 存在 `spec.md` 文件

**后续命令**: `澄清需求` 或 `制定计划`

---

### 6. 分析规格 (`分析规格.md`)

**用途**: 在任务生成后，对 spec.md、plan.md 和 tasks.md 进行非破坏性的跨文件一致性和质量分析。

**主要功能**:
- 检测重复、歧义和规格不足
- 识别宪章对齐问题
- 发现覆盖缺口和不一致性
- 生成结构化分析报告（不修改文件）

**使用场景**:
- 任务生成后，实施前进行质量检查
- 需要识别文档间的不一致
- 需要验证需求覆盖率

**前置条件**: 存在 `spec.md`、`plan.md` 和 `tasks.md` 文件

**后续命令**: `澄清需求`、`制定计划` 或 `执行实施`

---

### 7. 执行实施 (`执行实施.md`)

**用途**: 通过处理和执行 tasks.md 中定义的所有任务来执行实施计划。

**主要功能**:
- 检查检查表状态（如果存在）
- 验证项目设置和忽略文件
- 按阶段顺序执行任务
- 遵循依赖关系和并行标记
- 跟踪任务进度并更新任务文件

**使用场景**:
- 开始实际编码和实施
- 需要执行所有任务
- 需要系统化的实施流程

**前置条件**: 存在 `tasks.md` 文件

**后续命令**: 无（实施完成）

---

### 8. 更新宪章 (`更新宪章.md`)

**用途**: 从交互式或提供的原则输入创建或更新项目宪章，确保所有依赖模板保持同步。

**主要功能**:
- 更新项目核心原则和规范
- 同步所有依赖模板文件
- 版本管理和一致性检查
- 生成同步影响报告

**使用场景**:
- 需要更新项目核心原则
- 添加新的项目规范
- 修改现有的宪章内容

**前置条件**: 存在 `.specify/memory/constitution.md` 文件

**后续命令**: 可能需要重新运行其他命令以应用新原则

---

### 9. 验证 (`验证.md`)

**用途**: 执行需求验证工作流，验证功能规范文档中定义的所有用户故事验收场景和功能需求是否在实际系统中得到正确实现。

**主要功能**:
- 支持验证指定文件或自动搜索 `*spec*.md` 文件（排除智能体文件）
- 读取需求文档并提取用户故事和功能需求
- 使用浏览器自动化工具访问被测系统
- 逐项验证验收场景和功能需求
- 生成完整的验证报告和截图证据

**使用场景**:
- 需要验证功能是否按照需求正确实现
- 需要系统化的需求验证流程
- 需要生成验证报告和问题清单

**前置条件**: 
- 存在需求文档（用户指定或系统中找到的 `*spec*.md` 文件）
- 存在 `docs/rules/testing/test-target.md` 配置文件

**后续命令**: 无（验证完成）

**特殊说明**:
- 如果用户指定了文件路径，验证该指定的需求文件
- 如果用户未指定，自动搜索项目中所有 `*spec*.md` 文件（排除 `docs/agents/spec-verify-engineer.md`）
- 如果找到多个需求文件，为每个文件创建独立的验证报告

---

## 典型工作流程

### 新功能开发流程

```
编写规格 → 澄清需求 → 制定计划 → 生成任务 → 分析规格 → 执行实施
```

1. **编写规格**: 创建功能规格文档
2. **澄清需求**: 澄清不确定点
3. **制定计划**: 制定技术实施计划
4. **生成任务**: 分解为具体任务
5. **分析规格**: 质量检查
6. **执行实施**: 实际编码

### 需求验证流程

```
验证
```

1. **验证**: 验证需求文档中定义的功能是否在实际系统中正确实现

### 需求质量改进流程

```
编写规格 → 生成检查表 → 澄清需求
```

1. **编写规格**: 创建或更新规格
2. **生成检查表**: 生成质量检查表
3. **澄清需求**: 根据检查表结果澄清问题

---

## 命令文件位置

所有命令文件位于: `.cursor/commands/`

- `编写规格.md`
- `澄清需求.md`
- `制定计划.md`
- `生成任务.md`
- `生成检查表.md`
- `分析规格.md`
- `执行实施.md`
- `更新宪章.md`
- `验证.md`

---

## 注意事项

1. **命令依赖**: 大多数命令需要前置命令生成的文件，请按照工作流程顺序执行
2. **文件路径**: 所有命令使用绝对路径，确保路径正确
3. **交互模式**: 某些命令（如`澄清需求`）需要用户交互，请及时响应
4. **只读命令**: `分析规格` 是只读命令，不会修改任何文件
5. **多文件支持**: `验证` 命令支持验证单个文件或自动搜索多个文件

---

*创作者: 王瑞雪*

