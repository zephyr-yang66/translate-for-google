---
level: 10
description: 公司级通用 Common Admin 中后台页面表单布局设计规范。
globs: **/*.{vue,html,css,js,ts}
---

# 表单布局规范

> 根据label字符长度自动选择最佳布局方式

## 布局切换规则

```yaml
判断逻辑:
  第一步: 判断字段数量
    字段数量 > 8:
      使用: 两列布局 (a-row + a-col)
      Modal宽度: 900px
      label-col: { span: 8 }
      wrapper-col: { span: 16 }
    字段数量 <= 8:
      使用: 单列布局
      Modal宽度: 700px
  
  第二步: 判断label长度
    label.length > 6:
      布局: vertical (上下布局)
      原因: 避免label截断,保证输入框有足够空间

    label.length <= 6:
      布局: horizontal (左右布局)
      原因: 视觉紧凑,符合常规习惯

字符计算:
  - 所有字符(中英文/数字/符号)均计1个字符
  - "用户名" = 3字符
  - "企业统一社会信用代码" = 10字符
```

## 实现方式

### 左右布局 (Horizontal)

适用: label ≤ 6字符

```vue
<a-form
  :model="formData"
  :label-col="{ span: 6 }"
  :wrapper-col="{ span: 18 }"
>
  <a-form-item label="用户名" name="username">
    <a-input v-model:value="formData.username" />
  </a-form-item>
</a-form>
```

### 上下布局 (Vertical)

适用: label > 6字符

```vue
<a-form :model="formData" layout="vertical">
  <a-form-item label="企业统一社会信用代码" name="creditCode">
    <a-input v-model:value="formData.creditCode" />
  </a-form-item>
</a-form>
```

### 两列布局 (Grid)

适用: 字段数量 > 8个

- 使用 `a-row` + `a-col` 组件，每行两个字段
- Modal 宽度设置为 900px
- label-col: `{ span: 8 }`, wrapper-col: `{ span: 16 }`
- 文本域、富文本等复杂字段独占一行，使用 `:span="24"`
- 独占行的字段 label-col 调整为 `{ span: 4 }`，wrapper-col 为 `{ span: 20 }`

## 完整示例

### 混合长度label (使用vertical)

```vue
<template>
  <a-card title="企业信息" :bordered="false">
    <a-form
      ref="formRef"
      :model="formData"
      :rules="formRules"
      layout="vertical"
    >
      <a-form-item label="企业名称" name="companyName">
        <a-input v-model:value="formData.companyName" placeholder="请输入企业名称" />
      </a-form-item>

      <!-- 触发vertical: 10字符 > 6 -->
      <a-form-item label="企业统一社会信用代码" name="creditCode">
        <a-input v-model:value="formData.creditCode" placeholder="请输入18位信用代码" />
      </a-form-item>

      <a-form-item>
        <a-space>
          <a-button type="primary" @click="handleSubmit">提交</a-button>
          <a-button @click="handleCancel">取消</a-button>
        </a-space>
      </a-form-item>
    </a-form>
  </a-card>
</template>

<script setup lang="ts">
import { ref, reactive } from 'vue';
import type { FormInstance } from 'ant-design-vue';

const formRef = ref<FormInstance>();

const formData = reactive({
  companyName: '',
  creditCode: '',
});

const formRules = {
  companyName: [{ required: true, message: '请输入企业名称', trigger: 'blur' }],
  creditCode: [
    { required: true, message: '请输入信用代码', trigger: 'blur' },
    { len: 18, message: '信用代码为18位', trigger: 'blur' },
  ],
};

const handleSubmit = async () => {
  await formRef.value?.validate();
  // 提交逻辑
};

const handleCancel = () => {
  formRef.value?.resetFields();
};
</script>
```

### 全短label (使用horizontal)

```vue
<template>
  <a-card title="用户信息" :bordered="false">
    <a-form
      ref="formRef"
      :model="formData"
      :label-col="{ span: 4 }"
      :wrapper-col="{ span: 20 }"
    >
      <a-form-item label="姓名" name="name">
        <a-input v-model:value="formData.name" />
      </a-form-item>

      <a-form-item label="手机号" name="phone">
        <a-input v-model:value="formData.phone" />
      </a-form-item>

      <a-form-item label="邮箱" name="email">
        <a-input v-model:value="formData.email" />
      </a-form-item>

      <a-form-item :wrapper-col="{ offset: 4, span: 20 }">
        <a-space>
          <a-button type="primary" @click="handleSubmit">提交</a-button>
          <a-button @click="handleCancel">取消</a-button>
        </a-space>
      </a-form-item>
    </a-form>
  </a-card>
</template>

<script setup lang="ts">
import { ref, reactive } from 'vue';
import type { FormInstance } from 'ant-design-vue';

const formRef = ref<FormInstance>();

const formData = reactive({
  name: '',
  phone: '',
  email: '',
});

const handleSubmit = async () => {
  await formRef.value?.validate();
  // 提交逻辑
};

const handleCancel = () => {
  formRef.value?.resetFields();
};
</script>
```

## 注意事项

```typescript
// 正确: 使用字符数
const label = "企业统一社会信用代码"; // 10个字符
if (label.length > 6) {
  // 使用vertical布局
}

// 错误: 不要使用字节数
const byteLength = new Blob([label]).size;
```

```vue
<!-- 推荐: 整个表单统一布局 -->
<a-form layout="vertical">
  <a-form-item label="短label" />
  <a-form-item label="很长很长的label" />
</a-form>

<!-- 不推荐: 混合不同布局 -->
<a-form>
  <a-form-item label="短label" :label-col="{span: 4}" />
  <a-form-item label="很长很长的label" :label-col="{span: 8}" />
</a-form>
```

**两列布局**
- 成对字段(如开始/结束时间)应放在同一行
- 文本域、富文本编辑器等复杂输入应独占一行
- 字段按逻辑分组排列，相关字段放在相邻位置

## 最佳实践

**优先简化label**

```vue
<!-- 推荐: 简化label,用placeholder说明 -->
<a-form-item label="信用代码" name="creditCode">
  <a-input placeholder="请输入企业统一社会信用代码" />
</a-form-item>

<!-- 不推荐: 过长label -->
<a-form-item label="企业统一社会信用代码" name="creditCode">
  <a-input />
</a-form-item>
```

**使用帮助文本**

```vue
<a-form-item label="信用代码" name="creditCode">
  <a-input v-model:value="formData.creditCode" />
  <template #extra>请输入18位统一社会信用代码</template>
</a-form-item>
```

---

## 使用说明

**核心规则**:
- 字段数量 > 8 → 使用两列布局，Modal宽度 900px
- 字段数量 ≤ 8 → 使用单列布局，Modal宽度 700px
- label字符数 > 6 → 使用 `layout="vertical"`
- label字符数 ≤ 6 → 使用 `:label-col` + `:wrapper-col`
- 两列布局中文本域字段独占一行
- 整个表单保持统一布局风格
- 优先简化label，用placeholder/extra补充说明
